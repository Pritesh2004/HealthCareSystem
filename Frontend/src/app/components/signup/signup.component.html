<div class="signup-page">
  <div *ngIf="!otpSent" class="signup-container">
    <p id="signup">Signup</p>
    <form class="signup-form" #signupForm="ngForm" (submit)="sendOTP(user.email)">

      <!-- Username and Email Fields in Row -->
      <div class="input-row">
        <!-- Username Field -->


        <!-- Email Field -->
        <div class="input-div">
          <input type="email" id="email" [(ngModel)]="user.email" #email="ngModel" name="email" required
            pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}" placeholder="Email" >
          <span *ngIf="email.invalid && email.touched" class="error-message" style="color: red;">
            <span *ngIf="email.errors?.['required']">Email is required.</span>
            <span *ngIf="email.errors?.['pattern']">Please enter a valid email address.</span>
          </span>
        </div>
      </div>

      <!-- First Name and Last Name Fields in Row -->
      <div class="input-row">
        <!-- First Name Field -->
        <div class="input-div">
          <input type="text" id="firstName" [(ngModel)]="user.firstName" #firstName="ngModel" name="firstName" required
            minlength="2" maxlength="50" pattern="[a-zA-Z ]+" placeholder="First Name">
          <span *ngIf="firstName.invalid && firstName.touched" class="error-message" style="color: red;">
            <span *ngIf="firstName.errors?.['required']">First Name is required.</span>
            <span *ngIf="firstName.errors?.['minlength']">First Name must be at least 2 characters long.</span>
            <span *ngIf="firstName.errors?.['maxlength']">First Name cannot exceed 50 characters.</span>
            <span *ngIf="firstName.errors?.['pattern']">First Name can only contain letters and spaces.</span>
          </span>
        </div>
        </div>
        <div class="input-row">

        <!-- Last Name Field -->
        <div class="input-div">
          <input type="text" id="lastName" [(ngModel)]="user.lastName" #lastName="ngModel" name="lastName" required
            minlength="2" maxlength="50" pattern="[a-zA-Z ]+" placeholder="Last Name">
          <span *ngIf="lastName.invalid && lastName.touched" class="error-message" style="color: red;">
            <span *ngIf="lastName.errors?.['required']">Last Name is required.</span>
            <span *ngIf="lastName.errors?.['minlength']">Last Name must be at least 2 characters long.</span>
            <span *ngIf="lastName.errors?.['maxlength']">Last Name cannot exceed 50 characters.</span>
            <span *ngIf="lastName.errors?.['pattern']">Last Name can only contain letters and spaces.</span>
          </span>
        </div>
      </div>

      <!-- Password and Phone Number Fields in Row -->
      <div class="input-row">
        <!-- Password Field -->
        <div class="input-div">
          <input type="password" id="password" [(ngModel)]="user.password" #password="ngModel" name="password" required
            minlength="6" maxlength="20" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{6,}$"
            placeholder="Password">
          <span *ngIf="password.invalid && password.touched" class="error-message" style="color: red;">
            <span *ngIf="password.errors?.['required']">Password is required.</span>
            <span *ngIf="password.errors?.['minlength']">Password must be at least 6 characters long.</span>
            <span *ngIf="password.errors?.['maxlength']">Password cannot exceed 20 characters.</span>
            <span *ngIf="password.errors?.['pattern']">Password must contain at least one uppercase letter, one
              lowercase letter, and one number.</span>
          </span>
        </div>
        </div>




        <button [disabled]="signupForm.invalid" type="submit">Register</button>

        <div id="login-link-div">
          <p id="login-text">Already have an account?</p>
          <a routerLink="/login" id="login-link">Login</a>
        </div>
    </form>
  </div>

  <div *ngIf="otpSent">
    <mat-card class="otp-card">
    <form class="otp-div" #otpForm="ngForm" (submit)="verifyOtp(formOtp.fOtp)">
      <p id="otp-heading">OTP Authentication</p>
      <input id="otp-input" type="text" [(ngModel)]="formOtp.fOtp" #fOtp="ngModel" name="fOtp" required placeholder="Enter OTP">
      <div class="otp-buttons">
        <button id="otp-btn" type="submit">Verify OTP</button>
      <button id="try-btn" (click)="toSignup()">Try again</button>
      </div>
      
    </form>
  </mat-card>
  </div>
</div>